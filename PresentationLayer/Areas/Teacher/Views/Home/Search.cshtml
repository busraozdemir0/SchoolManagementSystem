 @model SearchModel

@{
    ViewData["Title"] = "Arama Sonuçları";
}

<div class="inner-block">
    <div class="blank">
        @if (ViewBag.Keyword is null)
        {
            <h2 style="margin-bottom:2em;">
                Aradığınız “@ViewBag.Keyword” kelimesine ait sonuç bulunamadı... :(
            </h2>
            <p style="color:gray;">Lütfen tekrar deneyin.</p>

            <div class="clearfix"> </div>
        }

        else if (Model.Announcements.Count != 0)
        {

            <h2 style="margin-bottom:2em;">
                Şunun için @Model.Announcements.TotalItemCount sonuç bulundu: <span class="text-navy">“@ViewBag.Keyword”</span>
            </h2>
            @foreach (var announcement in Model.Announcements)
            {
                <hr />
                <div class="search-result">
                    <h3><a class="a-custom-link" asp-area="Teacher" asp-controller="Announcement" asp-action="Detail" asp-route-announcementId="@announcement.Id">@announcement.Title</a></h3>
                    <a href="#" class="a-custom-link">@(((DateTime)announcement.CreatedDate).ToString("dd-MM-yyyy"))</a>
                    <p>
                        @Html.Raw(announcement.Content)
                    </p>
                </div>
                <hr />
            }
            @if (Model.Announcements.TotalItemCount > 5)
            {
                @Html.PagedListPager((IPagedList)Model.Announcements, page => Url.Action("Search", new { keyword = ViewBag.Keyword, page }))
            }
            <div class="clearfix"> </div>

        }

        else if (Model.Grades.Count != 0)
        {
            <h2 style="margin-bottom:2em;">
                Şunun için @Model.Grades.TotalItemCount sonuç bulundu: <span class="text-navy">“@ViewBag.Keyword”</span>
            </h2>
            @foreach (var grade in Model.Grades)
            {
                <hr />
                <div class="search-result">
                    <h3><a class="a-custom-link" asp-area="Teacher" asp-controller="Grade" asp-action="GetAllStudentsWithGrade" asp-route-gradeId="@grade.Id">@grade.Name</a></h3>
                </div>
                <hr />
            }
            @if (Model.Grades.TotalItemCount > 5)
            {
                @Html.PagedListPager((IPagedList)Model.Grades, page => Url.Action("Search", new { keyword = ViewBag.Keyword, page }))
            }
            <div class="clearfix"> </div>
        }

        else if (Model.Lessons.Count != 0)
        {
            <h2 style="margin-bottom:2em;">
                Şunun için @Model.Lessons.TotalItemCount sonuç bulundu: <span class="text-navy">“@ViewBag.Keyword”</span>
            </h2>
            @foreach (var lesson in Model.Lessons)
            {
                if (lesson.UserId == ViewBag.UserId)
                {
                    <hr />
                    <div class="search-result">
                        <h3><a class="a-custom-link" asp-area="Teacher" asp-controller="Lesson" asp-action="Index" asp-route-lessonId="@lesson.Id">@lesson.LessonName</a></h3>
                        <a href="#" class="a-custom-link">Ders Kodu: @lesson.LessonCode - Ders Saati: @lesson.LessonCredit</a>
                    </div>
                    <hr />
                }
            }
            @if (Model.Lessons.TotalItemCount > 5)
            {
                @Html.PagedListPager((IPagedList)Model.Lessons, page => Url.Action("Search", new { keyword = ViewBag.Keyword, page }))
            }
            <div class="clearfix"> </div>
        }

        else if (Model.LessonScores.Count != 0)
        {
            <h2 style="margin-bottom:2em;">
                Şunun için @Model.LessonScores.TotalItemCount sonuç bulundu: <span class="text-navy">“@ViewBag.Keyword”</span>
            </h2>
            @foreach (var lessonScore in Model.LessonScores)
            {
                <hr />
                <div class="search-result">
                    <h3><a class="a-custom-link" asp-area="Teacher" asp-controller="LessonScore" asp-action="Update" asp-route-lessonScoreId="@lessonScore.Id">Öğrenci No: @lessonScore.StudentNo - @lessonScore.GradeName </a></h3>
                    <a href="#" class="a-custom-link">@lessonScore.Lesson.LessonCode @lessonScore.Lesson.LessonName  </a>
                </div>
                <hr />

            }
            @if (Model.LessonScores.TotalItemCount > 5)
            {
                @Html.PagedListPager((IPagedList)Model.LessonScores, page => Url.Action("Search", new { keyword = ViewBag.Keyword, page }))
            }
            <div class="clearfix"> </div>
        }

        else if (Model.Users.Count != 0)
        {
            <h2 style="margin-bottom:2em;">
                Şunun için @Model.Users.TotalItemCount sonuç bulundu: <span class="text-navy">“@ViewBag.Keyword”</span>
            </h2>
            @foreach (var user in Model.Users)
            {
                <hr />
                <div class="search-result">
                    <h3><a class="a-custom-link" asp-area="Teacher" asp-controller="LessonScore" asp-action="Index" asp-route-userId="@user.Id">@user.Name @user.Surname</a></h3>
                    <a class="a-custom-link" href="#">@user.UserName - @user.Email</a>
                </div>
                <hr />
            }
            @if (Model.Users.TotalItemCount > 5)
            {
                @Html.PagedListPager((IPagedList)Model.Users, page => Url.Action("Search", new { keyword = ViewBag.Keyword, page }))
            }
            <div class="clearfix"> </div>
        }

        else if (Model.Messages.Count != 0)
        {
            <h2 style="margin-bottom:2em;">
                Şunun için @Model.Messages.TotalItemCount sonuç bulundu: <span class="text-navy">“@ViewBag.Keyword”</span>
            </h2>
            @foreach (var message in Model.Messages)
            {
                <hr />
                <div class="search-result">
                    <h3><a class="a-custom-link" data-id="@message.Id" asp-area="Teacher" asp-controller="Message" asp-action="Details" asp-route-messageId="@message.Id">Gönderen: @message.SenderUserEmail - @message.SenderUser.Name @message.SenderUser.Surname</a></h3>
                    <a data-id="@message.Id" asp-area="Teacher" asp-controller="Message" asp-action="Details" asp-route-messageId="@message.Id" class="a-custom-link">Konu: @message.Subject - Mesaj: @Html.Raw(message.Content)</a>
                </div>
                <hr />
            }
            @if (Model.Messages.TotalItemCount > 5)
            {
                @Html.PagedListPager((IPagedList)Model.Messages, page => Url.Action("Search", new { keyword = ViewBag.Keyword, page }))
            }
            <div class="clearfix"> </div>
        }

        else
        {
            <h2 style="margin-bottom:2em;">
                Aradığınız “@ViewBag.Keyword” kelimesine ait sonuç bulunamadı... :(
            </h2>
            <p style="color:gray;">Lütfen tekrar deneyin.</p>

            <div class="clearfix"> </div>

        }

    </div>
</div>

